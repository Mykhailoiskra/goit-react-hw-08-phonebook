(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{121:function(e,t,n){},124:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n(0),s=n.n(c),o=n(24),i=n.n(o),u=n(6),l=n(66),j=n(18),d=n(9),b=n(67),p=n.n(b),h=n(16),f=n(33),O=n(14),m=n(68),x=n.n(m),g=function(e){var t=e.name,n=e.number,r=e.onDelete;return Object(a.jsx)(f.a,{className:x.a.contact,bg:"dark",text:"light",children:Object(a.jsxs)(f.a.Body,{children:[Object(a.jsx)(f.a.Title,{children:t}),Object(a.jsxs)(f.a.Text,{children:["Phone: ",n]}),Object(a.jsx)(O.a,{variant:"outline-light",onClick:r,children:"Delete"})]})})},v=n(21),_=n(12),w=n(10),k=n(13),y=n.n(k),L=n(26),C=n(22),N=n.n(C),S=Object(w.b)("contacts/get",function(){var e=Object(L.a)(y.a.mark((function e(t,n){var r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("/contacts");case 3:return r=e.sent,a=r.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue());case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()),T=Object(w.b)("contacts/add",function(){var e=Object(L.a)(y.a.mark((function e(t,n){var r,a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),!r.contacts.items.find((function(e){return e.name===t.name}))){e.next=5;break}return alert("".concat(t.name," is already in the list")),e.abrupt("return",n.rejectWithValue());case 5:return e.prev=5,e.next=8,N.a.post("/contacts",t);case 8:return a=e.sent,c=a.data,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()),I=Object(w.b)("contact/delete",function(){var e=Object(L.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("/contacts/".concat(t));case 3:return e.abrupt("return",t);case 6:e.prev=6,e.t0=e.catch(0),n.rejectWithValue();case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()),P=Object(w.c)({name:"contacts",initialState:{items:[],filter:""},reducers:{changeFilter:function(e,t){var n=t.payload;e.filter=n}},extraReducers:(r={},Object(_.a)(r,S.fulfilled,(function(e,t){e.items=t.payload})),Object(_.a)(r,T.fulfilled,(function(e,t){e.items.push(t.payload)})),Object(_.a)(r,I.fulfilled,(function(e,t){e.items=e.items.filter((function(e){return e.id!==t.payload}))})),r)}),E=P.actions.changeFilter,F=P.reducer,R=n(36),U=function(e){return e.contacts.filter},B=Object(R.a)([function(e){return e.contacts.items},U],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),z=n(51),G=n.n(z),M=function(){var e=Object(u.c)(U),t=Object(u.b)();return Object(a.jsxs)("label",{className:G.a.filter,children:["Find",Object(a.jsx)("input",{type:"text",value:e,onChange:function(e){return t(E(e.target.value))},className:G.a.filter__input,placeholder:"Enter name..."})]})},A=n(52),D=n.n(A),H=document.querySelector("#modal-root");function W(e){var t=e.onClose,n=e.children;Object(c.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}),[]);var r=function(e){"Escape"===e.code&&t()};return Object(o.createPortal)(Object(a.jsx)("div",{className:D.a.backdrop,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(a.jsx)("div",{className:D.a.content,children:n})}),H)}var V=n(8);function Y(e){var t=e.onSubmit,n=Object(c.useState)(""),r=Object(v.a)(n,2),s=r[0],o=r[1],i=Object(c.useState)(""),l=Object(v.a)(i,2),j=l[0],d=l[1],b=Object(u.b)(),p=function(e){var t=e.currentTarget,n=t.name,r=t.value;switch(n){case"name":o(r);break;case"number":d(r);break;default:return}},h=function(){o(""),d("")};return Object(a.jsxs)(V.a,{onSubmit:function(e){e.preventDefault(),b(T({name:s,number:j})),h(),t()},children:[Object(a.jsxs)(V.a.Group,{controlId:"contact/name",children:[Object(a.jsx)(V.a.Label,{children:"Name"}),Object(a.jsx)(V.a.Control,{type:"text",placeholder:"Name",name:"name",value:s,onChange:p})]}),Object(a.jsxs)(V.a.Group,{controlId:"contact/phone",children:[Object(a.jsx)(V.a.Label,{children:"Phone"}),Object(a.jsx)(V.a.Control,{type:"number",placeholder:"phone number",value:j,name:"number",onChange:p})]}),Object(a.jsx)(O.a,{variant:"primary",type:"submit",children:"Submit"})]})}var q=n(69),J=n.n(q);function K(){var e=Object(c.useState)(!1),t=Object(v.a)(e,2),n=t[0],r=t[1],s=function(){return r((function(e){return!e}))};return Object(a.jsxs)(h.a,{children:[Object(a.jsxs)("div",{className:J.a.wrapper,children:[Object(a.jsx)(M,{}),Object(a.jsx)(O.a,{variant:"dark",size:"sm",onClick:s,children:"Add Contact"})]}),n&&Object(a.jsx)(W,{onClose:s,children:Object(a.jsx)(Y,{onSubmit:s})})]})}var Q=function(e){return e.auth.isLoggedIn},Z=function(e){return e.auth.user.email},X=function(e){return e.auth.isFetchingUser},$=function(e){return e.auth.isLoading},ee=n(53),te=n.n(ee),ne=function(){var e=Object(u.c)(B),t=Object(u.b)(),n=Object(u.c)(Q);return Object(c.useEffect)((function(){n&&t(S())}),[t,n]),Object(a.jsxs)(h.a,{children:[Object(a.jsx)(K,{}),e.length>0?Object(a.jsx)("ul",{className:te.a.contactList,children:e.map((function(e){var n=e.id,r=e.name,c=e.number;return Object(a.jsx)("li",{className:te.a.contactList__item,children:Object(a.jsx)(g,{name:r,number:c,onDelete:function(){t(I(n))}})},n)}))}):Object(a.jsx)("h1",{children:"You don't have any contacts yet"})]})},re=n(44),ae=n(45);N.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var ce=function(e){N.a.defaults.headers.common.Authorization="Bearer ".concat(e)},se=function(){N.a.defaults.headers.common.Authorization=""},oe={register:Object(w.b)("user/register",function(){var e=Object(L.a)(y.a.mark((function e(t,n){var r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post("/users/signup",t);case 3:return r=e.sent,a=r.data,ce(a.token),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),alert("Please use other credentials"),e.abrupt("return",n.rejectWithValue());case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),login:Object(w.b)("user/login",function(){var e=Object(L.a)(y.a.mark((function e(t,n){var r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post("/users/login",t);case 3:return r=e.sent,a=r.data,ce(a.token),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue());case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),logout:Object(w.b)("user/logout",Object(L.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post("/users/logout");case 3:se(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),fetchCurrentUser:Object(w.b)("user/fetchCurrent",function(){var e=Object(L.a)(y.a.mark((function e(t,n){var r,a,c,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return ce(a),e.prev=5,e.next=8,N.a.get("/users/current");case 8:return c=e.sent,s=c.data,e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},ie=n(30),ue=n.n(ie);function le(){var e=Object(u.c)(Q),t=Object(u.c)(Z),n=Object(u.b)();return Object(a.jsx)(h.a,{fluid:!0,children:Object(a.jsxs)(re.a,{bg:"dark",variant:"dark",className:ue.a.navBar,expand:"lg",children:[Object(a.jsx)(re.a.Brand,{as:j.b,to:"/",children:"Contacts Book"}),e?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ae.a.Link,{as:j.b,to:"/contacts",className:ue.a.link,children:"Contacts"}),Object(a.jsxs)("div",{className:ue.a.userMenu,children:[Object(a.jsxs)(re.a.Text,{className:ue.a.welcome,children:["Hello, ",t]}),Object(a.jsx)(O.a,{type:"button",size:"sm",variant:"outline-light",onClick:function(){return n(oe.logout())},children:"Log out"})]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ae.a.Link,{as:j.b,to:"/register",className:ue.a.link,children:"Register"}),Object(a.jsx)(ae.a.Link,{as:j.b,to:"/login",className:ue.a.link,children:"Log In"})]})]})})}var je=n(71),de=n(70),be=n.n(de);function pe(){var e=Object(u.c)(Q);return Object(a.jsx)(h.a,{children:Object(a.jsxs)(je.a,{className:be.a.wrapper,children:[Object(a.jsx)("h1",{children:"Hello, world!"}),Object(a.jsx)("p",{children:"This is some information about our phonebook app"}),!e&&Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"Please log in to access your contacts book"}),Object(a.jsx)(O.a,{as:j.b,variant:"dark",size:"sm",type:"button",to:"/login",children:"Log in"}),Object(a.jsx)("p",{children:"First time here? Please register to start using our amazing app"}),Object(a.jsx)(O.a,{as:j.b,variant:"dark",size:"sm",type:"button",to:"/register",children:"Register"})]})]})})}var he=n(42),fe=n.n(he);function Oe(){var e=Object(u.b)(),t=Object(c.useState)(""),n=Object(v.a)(t,2),r=n[0],s=n[1],o=Object(c.useState)(""),i=Object(v.a)(o,2),l=i[0],j=i[1],d=Object(c.useState)(""),b=Object(v.a)(d,2),p=b[0],f=b[1],m=Object(u.c)($),x=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"name":return s(r);case"email":return j(r);case"password":return f(r);default:return}};return Object(a.jsxs)(h.a,{className:fe.a.wrapper,children:[Object(a.jsx)("h1",{className:fe.a.heading,children:"Create your account"}),Object(a.jsxs)(V.a,{onSubmit:function(t){t.preventDefault(),e(oe.register({name:r,email:l,password:p}))},className:fe.a.form,children:[Object(a.jsxs)(V.a.Group,{controlId:"userName",children:[Object(a.jsx)(V.a.Label,{children:"Your Name"}),Object(a.jsx)(V.a.Control,{type:"input",placeholder:"Type your name here",autoComplete:"off",value:r,name:"name",onChange:x})]}),Object(a.jsxs)(V.a.Group,{controlId:"userEmail",children:[Object(a.jsx)(V.a.Label,{children:"Your Email Address"}),Object(a.jsx)(V.a.Control,{type:"email",placeholder:"Type your email here",autoComplete:"off",value:l,name:"email",onChange:x})]}),Object(a.jsxs)(V.a.Group,{controlId:"userPassword",children:[Object(a.jsx)(V.a.Label,{children:"Create Password"}),Object(a.jsx)(V.a.Control,{type:"Password",autoComplete:"off",value:p,name:"password",onChange:x})]}),Object(a.jsx)(O.a,{variant:"dark",type:"submit",disabled:m,children:m?"Loading...":"Register"})]})]})}var me=n(43),xe=n.n(me);function ge(){var e=Object(c.useState)(""),t=Object(v.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),o=Object(v.a)(s,2),i=o[0],l=o[1],j=Object(u.b)(),d=Object(u.c)($),b=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":return r(a);case"password":return l(a);default:return}};return Object(a.jsxs)(h.a,{className:xe.a.wrapper,children:[Object(a.jsx)("h1",{className:xe.a.heading,children:"Please, log in"}),Object(a.jsxs)(V.a,{onSubmit:function(e){e.preventDefault(),j(oe.login({email:n,password:i})),r(""),l("")},className:xe.a.form,children:[Object(a.jsxs)(V.a.Group,{controlId:"userEmail",children:[Object(a.jsx)(V.a.Label,{children:"Your Email Address"}),Object(a.jsx)(V.a.Control,{type:"email",placeholder:"Type your email here",autoComplete:"off",value:n,name:"email",onChange:b})]}),Object(a.jsxs)(V.a.Group,{controlId:"userPassword",children:[Object(a.jsx)(V.a.Label,{children:"Enter your Password"}),Object(a.jsx)(V.a.Control,{type:"Password",autoComplete:"off",value:i,name:"password",onChange:b})]}),Object(a.jsx)(O.a,{variant:"dark",type:"submit",disabled:d,children:d?"Loading...":"Login"})]})]})}var ve=n(31),_e=n(40);function we(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,c=Object(_e.a)(e,["children","redirectTo"]),s=Object(u.c)(Q);return Object(a.jsx)(d.b,Object(ve.a)(Object(ve.a)({},c),{},{children:s?t:Object(a.jsx)(d.a,{to:r})}))}function ke(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,s=void 0===c?"/":c,o=Object(_e.a)(e,["children","restricted","redirectTo"]),i=Object(u.c)(Q)&&r;return Object(a.jsx)(d.b,Object(ve.a)(Object(ve.a)({},o),{},{children:i?Object(a.jsx)(d.a,{to:s}):t}))}n(121);function ye(){var e=Object(u.b)(),t=Object(u.c)(X);return Object(c.useEffect)((function(){e(oe.fetchCurrentUser())}),[e]),t?Object(a.jsx)(p.a,{type:"Puff",color:"#343a40",height:150,width:150,style:{textAlign:"center",marginTop:"100px"}}):Object(a.jsxs)(h.a,{children:[Object(a.jsx)(le,{}),Object(a.jsxs)(d.d,{children:[Object(a.jsx)(ke,{exact:!0,path:"/",children:Object(a.jsx)(pe,{})}),Object(a.jsx)(ke,{path:"/register",redirectTo:"/contacts",restricted:!0,children:Object(a.jsx)(Oe,{})}),Object(a.jsx)(ke,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(a.jsx)(ge,{})}),Object(a.jsx)(we,{path:"/contacts",redirectTo:"/login",children:Object(a.jsx)(ne,{})})]})]})}var Le,Ce=n(27),Ne=n(72),Se=n.n(Ne),Te=Object(w.c)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingUser:!1,isLoading:!1},extraReducers:(Le={},Object(_.a)(Le,oe.register.pending,(function(e){e.isLoading=!0})),Object(_.a)(Le,oe.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(_.a)(Le,oe.register.rejected,(function(e){e.isLoading=!1})),Object(_.a)(Le,oe.login.pending,(function(e){e.isLoading=!0})),Object(_.a)(Le,oe.login.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(_.a)(Le,oe.login.rejected,(function(e){e.isLoading=!1})),Object(_.a)(Le,oe.logout.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1,e.isLoading=!1})),Object(_.a)(Le,oe.fetchCurrentUser.pending,(function(e){e.isFetchingUser=!0})),Object(_.a)(Le,oe.fetchCurrentUser.fulfilled,(function(e,t){var n=t.payload;e.user=n,e.isLoggedIn=!0,e.isFetchingUser=!1})),Object(_.a)(Le,oe.fetchCurrentUser.rejected,(function(e){e.isFetchingUser=!1})),Le)}).reducer,Ie={key:"auth",storage:Se.a,whitelist:["token"]},Pe=Object(w.a)({reducer:{contacts:F,auth:Object(Ce.g)(Ie,Te)},middleware:Object(w.d)({serializableCheck:{ignoredActions:[Ce.a,Ce.f,Ce.b,Ce.c,Ce.d,Ce.e]}}),devTools:!1}),Ee=Object(Ce.h)(Pe);n(124),n(125),n(126);i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(u.a,{store:Pe,children:Object(a.jsx)(l.a,{loading:null,persistor:Ee,children:Object(a.jsx)(j.a,{children:Object(a.jsx)(ye,{})})})})}),document.getElementById("root"))},30:function(e,t,n){e.exports={navBar:"Header_navBar__oZjPc",userMenu:"Header_userMenu__1u6vw",link:"Header_link__wIxol",welcome:"Header_welcome__dMKNn"}},42:function(e,t,n){e.exports={wrapper:"Register_wrapper__3oIqD",heading:"Register_heading__33cvs",form:"Register_form__1odyQ"}},43:function(e,t,n){e.exports={wrapper:"Login_wrapper__1Z1Ru",heading:"Login_heading__22k3p",form:"Login_form__3v-Y7"}},51:function(e,t,n){e.exports={filter:"Filter_filter__2e5y-",filter__input:"Filter_filter__input__3RQ9s"}},52:function(e,t,n){e.exports={backdrop:"Modal_backdrop__2XK7d",content:"Modal_content__2-zvq"}},53:function(e,t,n){e.exports={contactList:"ContactList_contactList__37NpY"}},68:function(e,t,n){e.exports={contact:"Contact_contact__tBaGs"}},69:function(e,t,n){e.exports={wrapper:"ContactsMenu_wrapper__1cO_5"}},70:function(e,t,n){e.exports={wrapper:"Homepage_wrapper__2WBk9"}}},[[127,1,2]]]);
//# sourceMappingURL=main.5edf345d.chunk.js.map